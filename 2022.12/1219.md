## Availability (가용성)

> Availability = Uptime / ( Uptime + Downtime )
> 

가용성이란 서버와 네트워크, 프로그램 등의 정보 시스템이 정상적으로 사용 가능한 정도를 말한다.

### HA란?

**High Avilability (고가용성)
서버와 네트워크, 프로그램 등의 정보 시스템이 상당히 오랜 기간 동안 지속적으로 정상 운영이 가능한 성질**을 말한다. 고(高)가용성이란 “가용성이 높다”는 뜻으로서, “절대 고장 나지 않음”을 의미한다. 
고가용성은 흔히 가용한 시간의 비율을 99%, 99.9% 등과 같은 퍼센티지로 표현하는데, 1년에 계획 된 것 제외 5분 15초 이하의 장애시간을 허용한다는 의미의 파이브 나인스(5 nines), 즉 99.999%는 매우 높은 수준으로 고품질의 데이터센터에서 목표로 한다고 알려져 있다. 하나의 정보 시스템에 고가용성이 요구된다면, 그 시스템의 모든 부품과 구성 요소들은 미리 잘 설계되어야 하며, 실제로 사용되기 전에 완전하게 시험되어야 한다.

**HA의 목적**은 서비스의 다운타임을 최소화함으로써 가용성을 극대화하자는 것이다. 운영 서버에 장애가 발생하더라도, 대기 서버가 즉시 서비스를 대신 처리해 준다면 서비스의 다운타임은 최소화될 수 있다. HA와 클러스터(Cluster)라는 용어는 엄밀히 말하면 다르지만, 고가용성이라는 의미로 혼용해 사용하고 있다.

### 서비스 연속성 확보를 위한 HA의 개요

- 두 대 이상의 시스템을 하나의 클러스터로 묶어서 한 시스템의 장애 시 클러스터 내의 다른 시스템이 신속하게 서비스를  Failover해 최소한의 서비스 중단을 이루는 매커니즘

### HA솔루션, HA 구성

고가용성 솔루션을 이용하면, 각 시스템 간에 공유 디스크를 중심으로 집단화 하여 클러스터로 엮어지게 만들 수 있다. 동시에 다수의 시스템을 클러스터로 연결할 수 있지만 주로 2개의 서버를 연결하는 방식을 많이 사용한다. 만약 클러스터로 묶인 2개의 서버 중 1대의 서버에서 장애가 발생할 경우, 다른 서버가 즉시 그 업무를 대신 수행하므로, 시스템 장애를 불과 수 초에서 수 분 안에 복구할 수 있다.

위의 내용으로 간단히 HA솔루션을 설명하면, 서버 2대를 통해 한쪽 서버가 장애 시 다른 한쪽 서버가 해당 서비스를 대신 운영하여 가용성을 높이는 솔루션이라고 생각 하면 되겠다.

HA(High Availability)는 2개의 서버를 이용하여 하나는 Active, 나머지하나는 Standby 상태로 정해놓는다. Active상태의 서버가 모든 부하를 담당하며 장애가 발생하는 경우 Standby 서버가 Active가 되면서 다시 서비스를 정상 작동할 수 있게 해주는 구성이다. 별도의 스토리지를 가지고 있기에 수시로 동기화가 이뤄져야한다. 
문제점으로는 서로 싱크가 맞지 않는 상황도 발생할 수 있다. Active서버 서비스가 멈추면 Standby 서버가 활성화 될 때 트랙잭션들이 모두 유실된다는 것이다. 실시간 트랜잭션량이 많은 서비스에는 치명적인 문제이다.

HA솔루션이 갖추어야 할 기본기능으로는

A. 데이터 복제기능

- 1번서버에서 장애 발생 시, 2번 서버를 바로 서비스하기위해서는 양쪽의 데이터가 항상 100% 동일해야하는 무결성을 보장해야한다. Data Replication 기능이 반드시 필요하다.

B. 장애 감시기능

- 네트워크 장애
- OS 및 서비스 프로그램 장애
- 서버 하드웨어 장애

장애를 감시할 수 있는 Agent는 각각 서버에 설치되어야 하며, 1번서버는 2번서버를 감시, 2번서버는 1번서버를 상호감시하여 고가용성을 유지하게 된다. 1번서버 문제발생 시 2번서버로 서비스가 자동전환 되기 위해 필수적인 기능이다.
### **HA솔루션 기능의 장단점**

장점 : 서비스의 연속성을 보장한다.

단점 : 데이터가 실시간 복제가 된다는 것이다. 이것이 무슨 말이냐? 앞에서는 반드시 필요한 기능이라고 하지 않았냐? 라고 반문할 수 있지만, 답은 아래와 같다.실시간 DATA가 복제가 된다는 의미는 실수로 반영된 데이터 또는 바이러스 감염된 파일도 복제가 되어 2번 서버의 시스템 또한 감염 및 전이 될 수 있다는 것이다.

이러한 단점을 보완하기 위해서는 백업 솔루션을 추가 도입을 해야 할 수 있다. 즉, 최종적으로 DATA 나 시스템이 훼손 되었을 때는 해당 문제가 2대의 서버에서 동일하게 발생되므로, 시스템 및 DATA를 최종 보존을 하고 싶다면 백업을 고려 해야 한다.

추가적으로, 많은 분들이 HA가 백업의 대안 또는 더 높은 기술로 알고 있지만, 그것을 잘못된 생각이다. 정확하게는 각 솔루션 별 추구 하는 최종 목적이 다르다고 생각하면 되겠다. HA는 서비스의 연속성을 유지하기 위한 최적의 솔루션이며, 백업 솔루션은 어떠한 상황에서도 원하는 데이터를 복원 하여 데이터의 Lift Cycle을 보장 해줄 수 있는 솔루션이다.

- + 만약 안되어 있다면 어떤 일이 일어날까???
중요한 정보를 다루는데 있어서 이러한 고가용성을 달성할 수 없다면 정보의 손실이나 정보접근의 기회손실이 증가 할 것이다. 

고가용성을 확보하지 못한다면 시스템 장애시 클러스터 내의 다른 시스템이 신속하게 서비스를 Failover해 최소한의 서비스 중단을 이루지 못하므로 HA 서비스 다운 타임이 최대화 되고, 연속성이 확보되지 않으며 이에 따라 해당 기업의 신뢰도 및 이미지에 부정적인 영향을 끼칠 수 있다.
