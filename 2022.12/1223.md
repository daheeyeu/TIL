### **Scale Up**

서버의 자원이 부족하여 서버의 스펙을 상승 시키는 것을 말함

AWS에서는 스펙이 **더 좋은 인스턴스 타입으로 교체**하는 것이라고 할 수 있음.

### **Scale Out**

서버의 자원 스펙 상승으로는 한계가 있으며 효율이 떨어지는 시점이 있다.

Scale Out은 **컴퓨팅의 성능 상승보다 컴퓨팅 수를 늘리는 것**이다.

### **Scale In/down**

작업이 완료되어 더 이상 필요없는 **Scale Out으로 늘렸던 컴퓨팅 수를 줄이는 것**을 말한다.

## ****스케일 업(Scale-up)****
> 기존의 서버를 보다 높은 사양으로 **업그레이드**하는 것을 말한다. 
하드웨어적인 예를 들면, 성능이나 용량 증강을 목적으로 하나의 서버에 디스크를 추가하거나 CPU나 메모리를 업그레이드시키는 것을 말한다.
소프트웨어적인 예로는 AWS의 EC2 인스턴스 사양을 micro에서 small, small에서 medium 등으로 높이는 것으로 생각하면 된다.
> 

<aside>
💡 예를 들어, ‘1’의 처리 능력을 가진 서버 한 대를 ‘5’의 처리 능력을 가진 서버로 업그레이드시키는 것이다. CPU나 RAM을 추가하기로 했다면 현재 서버에 추가 부품을 장착할 수 있는 여유 슬롯이 있어야 하며, 그렇지 않은 경우 서버 자체를 고성능으로 교체하는 것이 필요하다. 스케일 업의 경우, 서버 한 대에 모든 부하가 집중되므로 장애 시 영향을 크게 받을 수 있는 위험성이 있다. 한 대의 서버에서 모든 데이터를 처리하므로 데이터 갱신이 빈번하게 일어나는 ‘**데이터베이스 서버**’에 적합한 방식이다.

</aside>

- 즉, 한 대의 서버에서 모든 데이터를 처리하기 때문에, 데이터 갱신이 빈번하게 일어나는 경우 적합하다.
    - 정합성을 유지하기 어려운 경우
    - OTLP
    - 데이터베이스 서버

### 스케일 업의 제약

1. 단일 노드의 스펙 상한이 시스템의 처리 성능 한계가 되어버리는 것이다.
2.  인스턴스 용량을 변경할 때 일시적으로 중단을 해야 한다는 단점이 있다.

CPU, 메모리와 같은 컴포넌트들은 확장하기가 힘들고 또 일정 수준이상일 경우 비용 대비 성능의 증가 폭이 확연히 떨어진다. 그리고 이렇게 시스템을 구축해 놓으려면 초기 비용이 커지는 문제점이 발생한다. 
또한 서비스 트래픽이 줄어들어 시스템 컴포넌트를 줄이는 스케일 다운을 할 때 기존에 미리 시스템을 구축해 놓은 비용이 낭비되는 단점이 있다.

이러한 문제로 인해 Scale out/Scale in 방식이 대안으로 존재한다. 

## ****스케일 아웃(Scale-out)****

---

> 장비를 추가해서 확장하는 방식을 말한다.
기존 서버만으로 용량이나 성능의 한계에 도달했을 때, 비슷한 사양의 서버를 추가로 연결해 처리할 수 있는 데이터 용량이 증가할 뿐만 아니라 기존 서버의 부하를 분담해 성능 향상의 효과를 기대할 수 있다.
스케일 아웃은 스케일 업과 달리 노드 수를 늘리는 것으로 스케일링을 하기 때문에 **상한선 제약 없이 동적으로 적용할 수 있다.**
스케일 업은 시스템 하나의 용량을 키우지만 스케일 아웃은 비슷한 용량의 시스템을 병렬적으로 배치한다. 
이러한 병렬적인 확장을 위해서 로드밸런서와 같은 트래픽 분산장치가 필수적으로 요구된다. 이렇게 병렬적으로 시스템을 확장 가능해 가격 대비 성능 향상 효과가 더 크다.

☁️  **클라우드 서비스**에서는 자원 사용량을 모니터링하여 자동으로 서버를 증설(Scale Out)하는 Auto Scaling 기능도 있다.

<aside>
💡 예를 들어, ‘1’의 처리 능력을 가진 서버에 동일한 서버 4대를 더 추가하여, 총 ‘5’의 처리 능력을 만드는 것이다. 서버가 여러 대가 되기 때문에 각 서버에 걸리는 부하를 균등하게 해주는 ‘**로드밸런싱**’이 필수적으로 동반되어야 한다. 스케일 아웃의 경우, 서버 한 대가 장애로 다운되더라도 다른 서버로 서비스 제공이 가능하다는 장점이 있다. 반면 모든 서버가 동일한 데이터를 가지고 있어야 하므로, 데이터 변화가 적은 ‘**웹 서버**’에 적합한 방식이다.

</aside>

## ****스케일 업(Scale-up)과 스케일 아웃(Scale-out) 비교****

- **스케일 업**
    - 스케일 업 아키텍처에서는 추가적인 네트워크 연결 없이 용량을 증강할 수 있다. 스케일 아웃보다 관리 비용이나 운영 이슈가 적고, 사양만 올리면 되는 것이기 때문에 비교적 쉽다.
    - 다만 성능 향상에 한계가 있으며 성능 향상에 따른 비용부담이 크고, 서버 한 대가 부담하는 양이 많아서 자연재해 등의 다양한 이유로 서버에 문제가 생기면 큰 타격을 입게 된다.
    - 또한 기존의 서버를 교체함으로써 성능을 올릴 때에는 서비스를 이용할 수 없는 다운타임이 불가피하다.

- **스케일 아웃**
    - 스케일 아웃 아키텍처의 가장 큰 장점 중 하나는 확장의 유연성에 있다.
    - 스케일 업 시스템을 구축한 상황에서는 향후 확장 가능성에 대비해 서버를 현재 필요한 만큼보다 더 많은 용량이나 성능을 확보해놓는 경우가 많다.
    - 그러나 이런 경우 예상했던 정도와 요구되는 정도가 다르거나, 확장의 필요성이 없어졌을 경우 추가로 확보해놓은 만큼의 손해가 발생하게 된다.
    - 스케일 아웃 방식으로 시스템을 구축한 상황에서는 서버를 필요한 만큼만 도입해 놓고, 장기적인 용량 증가 추이를 예측할 필요 없이 그때그때 필요한 만큼 서버를 추가해 용량과 성능을 확장(pay-as-you-grow)할 수 있게 된다.
    - 다만, 스케일 아웃도 장점만 있는 것은 아니다. 무엇보다 여러 노드를 연결해 병렬 컴퓨팅 환경을 구성하고 유지하려면 아키텍처에 대한 높은 이해도가 요구된다. 서버의 수가 늘어날수록 관리가 힘들어지는 부분이 있고, 아키텍처의 설계 단계에서부터 고려되어야 할 필요가 있기 때문이다.
    - 여러 노드에 부하를 균등하게 분산시키기 위해 로드 밸런싱(load balancing)이 필요하고, 노드를 확장할수록 문제 발생의 잠재 원인 또한 추가한 만큼 늘어나게 된다.

## ****스케일 인(Scale-in)****

---

> 스케일 업, 스케일 아웃과는 반대로 인스턴스 용량을 낮추거나 처리 노드 수를 줄이는 것을 각각 스케일 다운, 스케일 인이라 부른다.
> 스케일 인 작업은 서버 용량 부족으로 늘렸던 자원을 다시 회수 하는 작업을 의미한다. 서비스 사용량이 줄어 늘려놓았던 불필요한 서버 자원을 해제 하는 작업을 의미한다.

## + 오토스케일(Auto-Scale)

**시스템의 성능 요구 사항을 충족하기 위해 리소스를 자동으로 동적으로 일치시키는 프로세스이다.** 
작업량이 증가함에 따라 필요한 성능 수준을 유지하거나 증가하는 수요를 충족하기 위해 앱에 추가 리소스가 필요할 수 있다.  수요가 줄어들고 추가 리소스가 더 이상 필요하지 않은 경우 사용되지 않은 리소스의 할당을 취소하기 위한 자동 서비스를 마련하여 클라우드 지출을 줄일 수 있다.

자동 스케일링은 클라우드 호스팅 환경의 탄력성을 활용하며, 시스템 운영자가 리소스 추가 또는 제거나 시스템 성능 확인에 관해 지속적으로 의사 결정을 내려야 하는 필요성을 줄여 관리 오버헤드를 줄여 준다.

앱을 스케일링하는 두 가지 주요 방법(수직으로 또는 수평으로)이 있지만, 대개 스케일 업할 경우 시스템을 재배포하는 동안 시스템을 일시적으로 사용할 수 없게 해야 하므로 수직 스케일링을 자동화하는 것은 덜 일반적이다.

스케일 아웃 또는 스케일 인은 단순히 리소스의 인스턴스를 추가하거나 제거하는 것을 의미하고 앱은 새 리소스가 프로비저닝될 때 중단 없이 계속 실행되므로 자동 스케일링은 수평으로 스케일링할 때 더 일반적이다. 수요가 줄어들면 리소스를 가동 중지 시간 없이 원활하게 종료하고 할당을 취소할 수 있다.

## Cloud Service 의 등장과 같이 연관지어서 생각 해 보기

💡 참고 : [1-7,8 서버,클라우드서비스,온프레미스 / SaaS, PaaS, laaS](https://www.notion.so/1-7-8-SaaS-PaaS-laaS-87b3103e0e2f4a298effab8c471cb1b4) 

### Cloud Service란?

> **타사 제공업체가 호스팅하여 인터넷을 통해 사용자에게 제공하는 인프라, 플랫폼 또는 소프트웨어를 말한다.**
클라우드 서비스는 프론트엔드 클라이언트(예: 사용자의 서버, 태블릿, 데스크톱, 노트북 등 사용자의 모든 하드웨어)의 사용자 데이터 흐름을 원활하게 해준다. 사용자가 클라우드 서비스에 액세스하려면 컴퓨터, 운영 체제 및 인터넷 연결 또는 가상 프라이빗 네트워크(VPN)만 있으면 된다.
> 
- 주문형 셀프서비스 : 사업자와 직접 상호 작용하지 않고, 사용자의 **개별 관리화면**을 통해 서비스를 이용할 수 있다.
- 광범위한 네트워크 접속 : 모바일 기기 등의 **다양한 디바이스**를 통해 서비스에 접속할 수 있다.
- 리소스의 공유 : 사업자의 컴퓨팅 리소스를 **여러 사용자가 공유**하는 형태로 이용한다. 또한, 사용자는 자신이 사용하는 리소스의 정확한 위치를 알 수 없다.
- 신속한 확장성 : 필요에 따라, **필요한 만큼의 스케일 업**(처리 능력을 높이는 것)과 스케일 다운(처리 능력을 낮추는 것)이 가능하다.
- 측정 가능한 서비스 : 이용한 만큼 요금이 부가되는 **종량제**.

### Cloud Service **유형**

추가로 소프트웨어를 다운로드하지 않고도 인터넷을 통해 사용자가 액세스하는 모든 인프라, 플랫폼, 소프트웨어 또는 기술은 [클라우드 컴퓨팅](https://www.redhat.com/ko/topics/cloud)서비스라고 볼 수 있으며 다음의 서비스형(as-a-Service) 솔루션이 포함된다.
### PaaS(Platform as a Service)

단순한 클라우드 기반 앱에서 정교한 클라우드 사용 엔터프라이즈 응용 프로그램에 이르기까지 모든 것을 제공할 수 있는 리소스가 포함되어 있으며 클라우드에서 제공되는 완전한 개발 및 배포 환경

서버, 저장소, 네트워킹 등의 인프라뿐만 아니라 미들웨어, 개발 도구, BI(비즈니스 인텔리전스) 서비스, 데이터베이스 관리 시스템 등도 포함

"Pay as you go" 모델로 사용한 만큼 지불함.

예시) Amazon Web Services, Elastic Beanstalk, Microsoft Azure, Heroku, Force.com, Google App Engine, and Apache Stratos

### SaaS(Software as a Service)

기업의 소프트웨어를 구독제로 제공

소프트웨어를 설치, 호스트, 유지보수할 필요가 없음

예시) gmail, office 365, salesforce, paycom, quickbooks...

### IaaS(Infrastruncture as a Service)

> 서버, 네트워크, 스토리지 등의 IT 인프라에 필요한 구성 요소를 서비스 형태로 제공한다. 즉, IaaS 형태의 클라우드에서는 가상화된 환경에서 서버, 네트워크, 스토리지와 같은 인프라 3대 요소를 자유롭게 조합해서 자신만의 서비스 인프라를 만들 수 있기 때문에 SaaS나 PaaS보다 더 높은 **자유도**를 가진다.
> 

### **IaaS가 기존 인프라에 비해 가지는 몇가지 특징**

1. **과금 체계**

사용한 만큼 과금하는 종량 과금제이다. 따라서 접속자 수가 증가하는 기간일 때 서버를 늘리고 기간이 끝나면 다시 서버를 줄여서 요금을 효율적으로 쓸 수 있다. 이 점은 짧은 시간 동안 서버를 사용할 때에는 분명히 편리한 장점이다. 하지만 월 사용량으로 얼마를 지불하게 될지 예측이 어렵다는 문제를 가진다. 따라서 주의가 필요한 사항이기도 하다.

1. **서버 생성 속도**

서버 생성 속도가 빠르다. 온프레미스에서 물리 서버 하나 추가하는데도 꽤 긴 시간이 걸리던걸 생각해보면 정말 편하죠. 클릭 한번 하고 조금 기다리면 바로 생성되기 때문이다. 그래서 접속자 수에 맞춰서 유연하게 대응할 수 있습다. 중요한 건 서버 1개가 아니라 여러 대의 서버도 빠르게 추가할 수 있다는 의미가 된다. 이렇게 추가한 여러 대의 서버를 연결해서 거대한 시스템을 만들 수가 있다. `즉, 서버 수를 늘려 시스템 전체의 성능을 높이는 스케일 아웃이 매우 용이하다는 장점을 가지게 된다.`

1. **서버 생성 자유도**

용도 맞춰서 메모리나 CPU, 디스크 등의 서버 스펙을 자유롭게 선택할 수 있다. 물론 고스펙일 수록 비용은 많이 나온다. 그리고 변경이 자유롭기 때문에 서버 스펙이 부족한다고 판단되면 `스펙을 올리는 스케일업이나 다시 다운시키는 스케일 다운이 자유롭다는 장점도 가진다.`

1. **오토 스케일링과 로드밸런서**

상황 하나를 가정하겠다. 내가 인지하지 못할 때 내 서버에 접속자 수가 급격히 늘어나면 어떡해야 할까? 아무리 생성 속도가 빠른 IaaS이지만 내가 직접 늘려야만 한다면 이런 상황에 대비가 어려울 것이다. 이럴 때 자동으로 스케일 아웃하는 기능이 오토 스케일링이다.

그리고 서버 수가 늘어 났을 때 각 서버들에게 트래픽을 분산시켜 주는 것이 로드 밸런서이다. AWS의 Elastic Load Balancing이 대표적인 예다.

- **IaaS의 가장 큰 장점은 스케일 아웃, 스케일 업, 스케일 인, 스케일 다운이 빠르고 편하다는 것이다.**
처음 개발 단계에서는 적은 스펙의 서버로 시작해서 점차 스펙을 늘려가고, 과하게 측정했을 때에는 다시 낮추는 거죠. 그리고 판단에 따라서 스케일 아웃이 필요하다고 판단되면 서버를 늘리면 되는 것이다. 온프레미스 프로젝트에서 처음에 서버 스펙에서 얼마나 많은 고민을 하는지 생각해보면 된다. 그 수고를 줄여주는 것이다.
- 운영하다가 필요할 때는 같은 환경의 서버를 임시 생성해서 테스트 목적으로 사용해도 되고, 접속자 수가 적다 생각하면 다시 줄이거나, 서버 스펙을 낮춰도 되는 것이다. 물론 가장 중요 이슈는 언제나 **비용**이다.

### + 마이크로서비스 아키텍처

**마이크로서비스 아키텍처**는 각 서비스와 데이터를 분리해 독립적인 단위로 배포, 수정, 확장할 수 있는 클라우드 네이티브 아키텍처다. 마이크로서비스는 각 서비스간 결합도를 낮춤으로써 독립적인 단위 배포가 가능하기 때문에 배포 시간과 재기동 시간을 드라마틱하게 단축시킬 수 있다.

또한 자바, 파이썬(Python), Node.js 등 각 서비스마다 서로 다른 최적의 개발 언어 및 환경을 선택할 수 있다는 장점이 있으며, 무엇보다 가장 큰 장점은 자원 확장이 필요한 서비스만 부분적으로 **스케일 아웃(scale out)**이 가능하다는 점이다. 이를 통해 트랜잭션이 가장 많이 발생하는 서비스의 리소스만 확장할 수 있으며, 장애 발생 시 주변 시스템에 주는 영향도를 최소화할 수 있다는 강점을 가지고 있다.

## 결론

글로만 봤을때는 스케일 아웃이 스케일 업보다 뛰어나 보이지만, 무조건 뛰어나다고 단언할 수는 없다.

서비스를 제공하는 어플리케이션의 종류나 스토리지의 용도 등에 따라 선택할 수 있을 뿐이다.

빅데이터의 데이터 마이닝이나 검색엔진 데이터 분석 처리 등을 대표하는 OLAP(Online Analytical Processing) 어플리케이션 환경에서는 대량의 데이터 처리와 복잡한 쿼리가 이루어지기 때문에 스케일아웃 구성이 더 효율적이다.

반면 온라인 금융거래와 같이 워크플로우 기반의 빠르고 정확하면서 단순한 처리가 필요한 OLTP(Online Transaction Processing) 환경에서는 고성능의 스케일 업 방식이 적합하다고 한다.
>
