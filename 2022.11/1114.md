`@Retention`ì–´ë…¸í…Œì´ì…˜
ì–´ë…¸í…Œì´ì…˜ì˜Â **ë¼ì´í”„ ì‚¬ì´í´** ì¦‰,Â **ì–´ë…¸í…Œì´ì…˜ì´ ì–¸ì œê¹Œì§€ ì‚´ì•„ ë‚¨ì•„ ìˆì„ì§€ë¥¼ ì •í•˜ëŠ” ê²ƒ**

```java
/**
 * Indicates how long annotations with the annotated type are to
 * be retained.  If no Retention annotation is present on
 * an annotation type declaration, the retention policy defaults to
 * {@code RetentionPolicy.CLASS}.
 *
 * <p>A Retention meta-annotation has effect only if the
 * meta-annotated type is used directly for annotation.  It has no
 * effect if the meta-annotated type is used as a member type in
 * another annotation type.
 *
 * @author  Joshua Bloch
 * @since 1.5
 * @jls 9.6.3.2 @Retention
 */
@Documented
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.ANNOTATION_TYPE)
public @interface Retention {
    /**
     * Returns the retention policy.
     * @return the retention policy
     */
    RetentionPolicy value();
```

`@Retention`Â ì–´ë…¸í…Œì´ì…˜ì˜ ì†ì„±ì¸ Â `RetentionPolicy`Â ë¼ëŠ” ê²ƒì´ ìˆëŠ”ë°, RetentionPolicyì˜ ê°’ì„ ë„˜ê²¨ì£¼ëŠ” ê²ƒìœ¼ë¡œ ì–´ë…¸í…Œì´ì…˜ì˜ ë©”ëª¨ë¦¬ ë³´ìœ  ë²”ìœ„ê°€ ê²°ì •ëœë‹¤.ì—¬ê¸°ì— ì˜¬ ìˆ˜ ìˆëŠ” ê°’ì€ source, class, runtime ì´ë ‡ê²Œ 3ê°€ì§€ê°€ ìˆë‹¤.

- RetentionPolicy.SOURCE : ì†ŒìŠ¤ ì½”ë“œ(.java)ê¹Œì§€ ë‚¨ì•„ìˆëŠ”ë‹¤.
- RetentionPolicy.CLASS : í´ë˜ìŠ¤ íŒŒì¼(.class)ê¹Œì§€ ë‚¨ì•„ìˆëŠ”ë‹¤.(=ë°”ì´íŠ¸ ì½”ë“œ)
- RetentionPolicy.RUNTIME : ëŸ°íƒ€ì„ê¹Œì§€ ë‚¨ì•„ìˆëŠ”ë‹¤.(=ì‚¬ì‹¤ìƒ ì•ˆ ì‚¬ë¼ì§„ë‹¤.)

RetentionPolicyëŠ” enum í´ë˜ìŠ¤ë¡œ ë‹¤ìŒê³¼ ê°™ì´ ì„ ì–¸ë˜ì–´ìˆë‹¤.

```java
/**
 * Annotation retention policy.  The constants of this enumerated type
 * describe the various policies for retaining annotations.  They are used
 * in conjunction with the {@link Retention} meta-annotation type to specify
 * how long annotations are to be retained.
 *
 * @author  Joshua Bloch
 * @since 1.5
 */
public enum RetentionPolicy {
    /**
     * Annotations are to be discarded by the compiler.
     */
    SOURCE,

    /**
     * Annotations are to be recorded in the class file by the compiler
     * but need not be retained by the VM at run time.  This is the default
     * behavior.
     */
    CLASS,

    /**
     * Annotations are to be recorded in the class file by the compiler and
     * retained by the VM at run time, so they may be read reflectively.
     *
     * @see java.lang.reflect.AnnotatedElement
     */
    RUNTIME
}
```

- **SOURCE**Â : ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ì‹¤ìƒ ì£¼ì„ì²˜ëŸ¼ ì‚¬ìš©í•˜ëŠ” ê²ƒ. ì»´íŒŒì¼ëŸ¬ê°€ ì»´íŒŒì¼í• ë•Œ í•´ë‹¹ ì–´ë…¸í…Œì´ì…˜ì˜ ë©”ëª¨ë¦¬ë¥¼ ë²„ë¦°ë‹¤.
- **CLASS**Â : ì»´íŒŒì¼ëŸ¬ê°€ ì»´íŒŒì¼ì—ì„œëŠ” ì–´ë…¸í…Œì´ì…˜ì˜ ë©”ëª¨ë¦¬ë¥¼ ê°€ì ¸ê°€ì§€ë§Œ ì‹¤ì§ˆì ìœ¼ë¡œ ëŸ°íƒ€ì„ì‹œì—ëŠ” ì‚¬ë¼ì§€ê²Œ ëœë‹¤. ëŸ°íƒ€ì„ì‹œì— ì‚¬ë¼ì§„ë‹¤ëŠ” ê²ƒì€ ë¦¬í”Œë ‰ì…˜ìœ¼ë¡œ ì„ ì–¸ëœ ì–´ë…¸í…Œì´ì…˜ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ê²Œ ëœë‹¤. ë””í´íŠ¸ê°’ì´ë‹¤.
- **RUNTIME**Â : ì–´ë…¸í…Œì´ì…˜ì„ ëŸ°íƒ€ì„ì‹œì—ê¹Œì§€ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. JVMì´ ìë°” ë°”ì´íŠ¸ì½”ë“œê°€ ë‹´ê¸´ class íŒŒì¼ì—ì„œ ëŸ°íƒ€ì„í™˜ê²½ì„ êµ¬ì„±í•˜ê³  ëŸ°íƒ€ì„ì„ ì¢…ë£Œí•  ë•Œê¹Œì§€ ë©”ëª¨ë¦¬ëŠ” ì‚´ì•„ìˆë‹¤.

ğŸ™‹ğŸ»â€â™€ï¸Â **Retentionpolicy ê°€ Runtime ì´ë¼ë©´ ì‹¤í–‰ í•˜ëŠ” ì¤‘ì—ë„ annotation ì˜ ì •ë³´ëŠ” ì‚´ì•„ìˆë‹¤! ê·¸ë ‡ë‹¤ë©´ annotation ì˜ ì •ë³´ëŠ” ì‹¤í–‰ ì‹œì ì— ì–´ë–»ê²Œ ê°€ì ¸ ì˜¬ ìˆ˜ ìˆì„ê¹Œ??**

RUNTIME ì •ì±…-ëŸ°íƒ€ì„ì— ì–´ë…¸í…Œì´ì…˜ ì •ë³´ë¥¼ ë½‘ì•„ ì“¸ìˆ˜ ìˆë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤. ì¦‰, Reflection API ë“±ì„ ì‚¬ìš©í•˜ì—¬ ì–´ë…¸í…Œì´ì…˜ ì •ë³´ë¥¼ ì•Œìˆ˜ê°€ ìˆë‹¤.  ìŠ¤í”„ë§ì„ ì˜ˆë¡œ ë“¤ìë©´, @Controller, @Service, @Autowired ë“±ì´ ìˆë‹¤. ìŠ¤í”„ë§ì´ ì˜¬ë¼ì˜¤ëŠ” ì‹¤í–‰ ì¤‘ì¸ ì‹œì ì— ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì´ ê°€ëŠ¥í•´ì•¼í•˜ê¸° ë•Œë¬¸ì— RUNTIME ì •ì±…ì´ í•„ìš”í•˜ë‹¤. (ìŠ¤í”„ë§ë„ ë‚´ë¶€ì ìœ¼ë¡œ Reflection ë“±ì„ í™œìš©í•˜ì—¬ ì–´ë…¸í…Œì´ì…˜ì´ ë¶™ì€ ê²ƒë“¤ë§Œ ê°€ì ¸ì˜¨ë‹¤.)

*RUNTIME: ì–´ë…¸í…Œì´ì…˜ì´ ëŸ°íƒ€ì„ê¹Œì§€ ì¡´ì¬. ë¦¬í”Œë ‰ì…˜ì„ í†µí•´ ì–´ë…¸í…Œì´ì…˜ ì •ë³´ë¥¼ ì‚¬ìš© ê°€ëŠ¥*

---

**Reflectionì´ë€? êµ¬ì²´ì ì¸ í´ë˜ìŠ¤ íƒ€ì…ì„ ì•Œì§€ ëª»í•´ë„ ê·¸ í´ë˜ìŠ¤ì˜ ë©”ì†Œë“œ, íƒ€ì…, ë³€ìˆ˜ë“¤ì— ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ëŠ” ìë°” API,** ëŸ°íƒ€ì„ì— ì§€ê¸ˆ ì‹¤í–‰ë˜ê³  ìˆëŠ” í´ë˜ìŠ¤ë¥¼ ê°€ì ¸ì™€ì„œ ì‹¤í–‰í•´ì•¼í•˜ëŠ” ê²½ìš°, ë™ì ìœ¼ë¡œ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ëŠ” ë°©ë²•.
ìë°”ì˜ ë¦¬í”Œë ‰ì…˜ì€ í´ë˜ìŠ¤, ì¸í„°í˜ì´ìŠ¤, ë©”ì†Œë“œë“¤ì„ ì°¾ì„ ìˆ˜ ìˆê³ , ê°ì²´ë¥¼ ìƒì„±í•˜ê±°ë‚˜ ë³€ìˆ˜ë¥¼ ë³€ê²½í•˜ê±°ë‚˜ ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤.

**ì–´ë…¸í…Œì´ì…˜ê³¼ ë¦¬í”Œë ‰ì…˜**

Class, Field, Constructor, MethodëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë©”ì†Œë“œë¥¼ ê°€ì§€ëŠ”ë° ì´ë¥¼ ì´ìš©í•´ì„œ ì ìš©ëœ ì–´ë…¸í…Œì´ì…˜ ì •ë³´ë¥¼ ë³¼ ìˆ˜ ìˆë‹¤.

### Class Reflction API, ì–´ë…¸í…Œì´ì…˜

- **getAnnotations -**Â ìƒì†ë°›ì€ (@Inherit) ì–´ë…¸í…Œì´ì…˜ê¹Œì§€ ì¡°íšŒ
- **getDeclaredAnnotations**Â ìê¸° ìì‹ ì—ë§Œ ë¶™ì–´ìˆëŠ” ì–´ë…¸í…Œì´ì…˜ ì¡°íšŒ

**Test**

**[MyAnnotation]**

```java
@Retention(RetentionPolicy.RUNTIME)@Target({ElementType.TYPE,ElementType.FIELD})public@interface MyAnnotation {

	Stringname()default "name";

}

```

### 

**[MyBook]**

```java
@NoArgsConstructor@MyAnnotation(name = "MyBook")publicclassMybookextendsBookimplementsMyInterface{
}

```

**[ì–´ë…¸í…Œì´ì…˜ ì¡°íšŒ Test]**

```java
@Testpublicvoid test_ì–´ë…¸í…Œì´ì…˜_ì¡°íšŒ(){
    printText("getAnnotations");
    Arrays.stream(Mybook.class.getAnnotations()).forEach(System.out::println);
    finish();
}

```

>> ê²°ê³¼
>> ```xml
===========[getAnnotations]===========
@com.example.test.reflection.MyAnnotation(name="MyBook")
============================================
```
